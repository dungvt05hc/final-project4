
   # Find the port for connecting via SSH 
   az vmss list-instance-connection-info \
      --resource-group rg-project4 \
      --name udacity-vmss 
   # The following command will connect you to your VM. 
   # Replace `[public-ip]` with the public-ip address of your VMSS.
   ssh -p 50000 udacityadmin@13.64.227.65
   ssh -p 50003 udacityadmin@13.64.227.65

# Clone and navigate inside the project repo. 
   git clone https://github.com/dungvt05hc/final-project4.git
   cd final-project4
   # Make sure, you aer in the master branch
   git checkout Deploy_to_VMSS
   # Update sudo
   sudo apt update     
   # Install Python 3.10
   sudo apt install python3.10      
   python3 --version
   # Install pip
   sudo -H pip3 install --upgrade pip
   # Install and start Redis server. Refer https://redis.io/download for help.
   wget https://download.redis.io/releases/redis-6.2.4.tar.gz
   tar xzf redis-6.2.4.tar.gz
   cd redis-6.2.4
   make
   # Ping your Redis server to verify if it is running. It will return "PONG"
   redis-cli ping
   # The server will start after make. Otherwise, use
   src/redis-server           
   # Install dependencies - necessary Python packages - redis, opencensus, opencensus-ext-azure, opencensus-ext-flask, flask
   cd ..      
   pip install -r requirements.txt
   # Run the app from the Flask application directory
   cd azure-vote/
   python3 main.py


   az vmss diagnostics set \
  --resource-group rg-project4 \
  --vmss-name udacity-vmss \
  --settings <path-to-your-diagnostics-settings.json> \
  --protected-settings <path-to-your-protected-settings.json>


az monitor diagnostic-settings create \
  --name "MyDiagSetting" \
  --resource "/subscriptions/84a91a22-ffb1-40bb-ac4a-1e5c884f75a5/resourceGroups/rg-project4/providers/Microsoft.Compute/virtualMachineScaleSets/udacity-vmss" \
  --metrics '[{"category": "AllMetrics", "enabled": true}]' \
  --storage-account udacitydiag19103
